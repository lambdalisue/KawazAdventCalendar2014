# 敵キャラを動かす
シューティングゲームなので敵キャラにも動いてもらう必要があります。
すでにメインループ方式に移行しているので簡単です。

## どう動かすのかを考える
通常シューティングには様々な敵キャラが存在し、様々な動きを見せます。
隊列を組んで来るものやランダムに飛んでくるもの、その多様性がシューティングの
醍醐味かもしれません。

こんだけ言っておきながら、今回は分量の関係上敵キャラは上から下に降りてくるだけ
にします。
また上から下に降りてくるだけだとすぐに敵キャラがいなくなってしまうので下に抜けた
敵キャラは再度上に戻るようにプログラムします。

## 実際のプログラム
「キャラクターを動かす方法」や「移動範囲を制限する方法」はすでに行ったので
特に解説はありません。
下記コードを参照して `shooting.js` を書き換えてください。

```javascript
// ...

// 敵キャラの移動処理を定義
var moveEnemies = function() {
    // 上下左右の移動速度を定義
    var SPEED = 2;

    // 各敵キャラごとに処理を行う
    for(var i=0; i<ENEMIES; i++) {
        // 敵キャラのy座標を少し増やす
        enemies_y[i] += SPEED;

        // 敵キャラが下画面にはみ出た場合は上に戻す
        if (enemies_y[i] > canvas.height) {
            enemies_y[i] = -img_enemy.height;
            // せっかくなので x座標を再度ランダムに設定
            enemies_x[i] = Math.random() * (canvas.width - img_enemy.width);
        }
    }
};

// メインループを定義
var mainloop = function() {
    // 処理開始時間を保存
    var startTime = new Date();

    // プレイヤーの移動処理
    movePlayer();
    // 敵キャラの移動処理
    moveEnemies();

    // ...
}

// ...
```

実行すると敵キャラが上から永遠と降ってくるのが確認できると思います。

